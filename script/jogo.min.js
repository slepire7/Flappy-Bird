var Config,Storage,Game,Jogo;!function(t){t.canvas=document.querySelector("canvas"),t.contexto=t.canvas.getContext("2d"),t.frames=0,t.KeyNameStorage={lastPoint:"FlappyBird1.0Lp",bestPoint:"FlappyBird1.0bp"};const a=["localhost","127.0.0.1"].includes(window.location.hostname);t.TrilhasSonoras={HIT:()=>new Audio(`${0==a?"../Flappy-Bird/":"../"}assets/efeitos/hit.wav`),PULO:()=>new Audio(`${0==a?"../Flappy-Bird/":"../"}assets/efeitos/pulo.wav`),CAIU:()=>new Audio(`${0==a?"../Flappy-Bird/":"../"}assets/efeitos/caiu.wav`),PONTO:()=>new Audio(`${0==a?"../Flappy-Bird/":"../"}assets/efeitos/ponto.wav`)},t.sprites=new Image,t.sprites.src=`${0==a?"../Flappy-Bird/":"../"}assets/texture/sprites.png`,t.Draw=a=>{t.contexto.drawImage(t.sprites,a.spriteX,a.spriteY,a.largura,a.altura,a.x,a.y,a.largura,a.altura)},t.fazColisao=function(a,t){return a=a.y+a.altura,t.y<=a}}(Config=Config||{});class FlappyBird{frameAtual=0;spriteX=0;spriteY=0;largura=33;altura=24;x=10;y=50;gravidade=.25;velocidade=0;pulo=4;pula(){Config.TrilhasSonoras.PULO().play(),this.velocidade=-this.pulo}movimentos=[{spriteX:0,spriteY:0},{spriteX:0,spriteY:26},{spriteX:0,spriteY:52},{spriteX:0,spriteY:26}];atualizaOFrameAtual(){var a,t;Config.frames%10==0&&(a=1+this.frameAtual,t=this.movimentos.length,this.frameAtual=a%t)}desenha=()=>{this.atualizaOFrameAtual();var{spriteX:a,spriteY:t}=this.movimentos[this.frameAtual];Config.Draw({spriteX:a,spriteY:t,altura:this.altura,largura:this.largura,x:this.x,y:this.y})};atualiza(a,t){Config.fazColisao(this,t.chao)?(Config.TrilhasSonoras.CAIU().play(),a()):(this.velocidade=this.velocidade+this.gravidade,this.y=this.y+this.velocidade)}}class Chao{spriteX;spriteY;largura;altura;x;y;constructor(){this.spriteX=0,this.spriteY=610,this.largura=224,this.altura=112,this.x=0,this.y=Config.canvas.height-112}atualiza(){var a=this.largura/2,t=this.x-1;this.x=t%a}desenha(){Config.Draw({spriteX:this.spriteX,spriteY:this.spriteY,largura:this.largura,altura:this.altura,x:this.x,y:this.y}),Config.Draw({spriteX:this.spriteX,spriteY:this.spriteY,largura:this.largura,altura:this.altura,x:this.x+this.largura,y:this.y})}}class Cano{largura;altura;espaco;chao;ceu;pares;constructor(){this.largura=52,this.altura=400,this.espaco=80,this.chao={spriteX:0,spriteY:169},this.ceu={spriteX:52,spriteY:169},this.pares=[]}desenha(){this.pares.forEach(a=>{var t=a.y,i=a.x,e=t,s=(Config.Draw({spriteX:this.ceu.spriteX,spriteY:this.ceu.spriteY,largura:this.largura,altura:this.altura,x:i,y:e}),a.x),t=this.altura+90+t;Config.Draw({spriteX:this.chao.spriteX,spriteY:this.chao.spriteY,largura:this.largura,altura:this.altura,x:s,y:t}),a.canoCeu={x:i,y:this.altura+e},a.canoChao={x:s,y:t}})}temColisaoComOFlappyBird(a,t){var i=t.y,e=t.y+t.altura;return t.x+t.largura>=a.x&&(i<=a.canoCeu.y||e>=a.canoChao.y)}atualiza(t,i){Config.frames%100==0&&this.pares.push({x:Config.canvas.width,y:-150*(Math.random()+1)}),this.pares.forEach(a=>{a.x=a.x-2,this.temColisaoComOFlappyBird(a,i)&&(Config.TrilhasSonoras.HIT().play(),t()),a.x+this.largura<=0&&this.pares.shift()})}}class PlanoDeFundo{spriteX;spriteY;largura;altura;x;y;constructor(){this.spriteX=390,this.spriteY=0,this.largura=275,this.altura=204,this.x=0,this.y=Config.canvas.height-204}desenha(){Config.contexto.fillStyle="#70c5ce",Config.contexto.fillRect(0,0,Config.canvas.width,Config.canvas.height),Config.Draw({spriteX:this.spriteX,spriteY:this.spriteY,largura:this.largura,altura:this.altura,x:this.x,y:this.y}),Config.Draw({spriteX:this.spriteX,spriteY:this.spriteY,largura:this.largura,altura:this.altura,x:this.x+this.largura,y:this.y})}atualiza(){}}!function(a){a.Set=function(a,t){localStorage.setItem(a,JSON.stringify(t))},a.Get=function(a){return(a=localStorage.getItem(a))?JSON.parse(a):""}}(Storage=Storage||{});class Placar{pontuacao=0;desenha(){Config.contexto.font='35px "VT323"',Config.contexto.textAlign="right",Config.contexto.fillStyle="white",Config.contexto.fillText(""+this.pontuacao,Config.canvas.width-10,35),Storage.Set(Config.KeyNameStorage.lastPoint,this.pontuacao),Storage.Get(Config.KeyNameStorage.bestPoint)<Storage.Get(Config.KeyNameStorage.lastPoint)&&Storage.Set(Config.KeyNameStorage.bestPoint,this.pontuacao)}atualiza(){Config.frames%30==0&&(Config.TrilhasSonoras.PONTO().play(),this.pontuacao=this.pontuacao+1)}}class Score{constructor(a,t,i,e,s,r){this.spriteX=a,this.spriteY=t,this.largura=i,this.altura=e,this.x=s,this.y=r}desenha(){Config.Draw({spriteX:this.spriteX,spriteY:this.spriteY,largura:this.largura,altura:this.altura,x:this.x,y:this.y})}spriteX;spriteY;largura;altura;x;y}class MainScoreGame{none;bronze;prata;ouro;constructor(){var a=Config.canvas.width/2/2.4;this.none=new Score(0,78,44,44,a,135),this.bronze=new Score(48,124,44,44,a,135),this.prata=new Score(48,78,44,44,a,135),this.ouro=new Score(0,124,44,44,a,135)}desenha(){var a=Storage.Get(Config.KeyNameStorage.lastPoint),t=Storage.Get(Config.KeyNameStorage.bestPoint);Config.contexto.fillText(""+a,Config.canvas.width/3*2.4,147),Config.contexto.fillText(""+t,Config.canvas.width/3*2.4,Config.canvas.width/3*1.9),a<50?this.none.desenha():a<=100?this.bronze.desenha():a<=150?this.prata.desenha():200<=a&&this.ouro.desenha()}}!function(a){{var t=a.Main||(a.Main={});const s={};function i(a){t.TelaAtiva=a,t.TelaAtiva.inicializa()}function e(a){return()=>{t.TelaAtiva=a,t.TelaAtiva.inicializa()}}t.Telas={INICIO:{inicializa(){s.flappyBird=new FlappyBird,s.chao=new Chao,s.canos=new Cano},desenha(){(new PlanoDeFundo).desenha(),s.flappyBird.desenha(),s.chao.desenha(),r.desenha()},click(){i(t.Telas.JOGO)},atualiza(){s.chao.atualiza()}},JOGO:{inicializa(){s.placar=new Placar},desenha(){(new PlanoDeFundo).desenha(),s.canos.desenha(),s.chao.desenha(),s.flappyBird.desenha(),s.placar.desenha()},click(){s.flappyBird.pula()},atualiza(){s.canos.atualiza(e(t.Telas.GAME_OVER),s.flappyBird),s.chao.atualiza(),s.flappyBird.atualiza(e(t.Telas.GAME_OVER),s),s.placar.atualiza()}},GAME_OVER:{inicializa(){},desenha(){o.desenha&&o.desenha(),(new MainScoreGame).desenha()},atualiza(){},click(){i(t.Telas.INICIO)}}},t.mudaParaTela=i,t.TelaCondicional=e,t.TelaAtiva={click:()=>{},atualiza:()=>{},desenha:()=>{},inicializa:()=>{}};const r={spriteX:134,spriteY:0,largura:174,altura:152,x:Config.canvas.width/2-87,y:50,desenha(){Config.Draw({spriteX:r.spriteX,spriteY:r.spriteY,largura:r.largura,altura:r.altura,x:r.x,y:r.y})}},o={spriteX:134,spriteY:153,largura:226,altura:200,x:Config.canvas.width/2-113,y:50,desenha(){Config.Draw({spriteX:o.spriteX,spriteY:o.spriteY,largura:o.largura,altura:o.altura,x:o.x,y:o.y})}}}}(Game=Game||{}),function(a){function t(){Game.Main.TelaAtiva.desenha(),Game.Main.TelaAtiva.atualiza(),Config.frames=Config.frames+1,requestAnimationFrame(t)}(a.PageEvents||(a.PageEvents={})).Main=function(){document.getElementById("game-canvas").addEventListener("click",function(){Game.Main.TelaAtiva.click&&Game.Main.TelaAtiva.click()}),window.addEventListener("keypress",function(a){Game.Main.TelaAtiva.click&&Game.Main.TelaAtiva.click()}),Game.Main.mudaParaTela(Game.Main.Telas.INICIO),t()}}(Jogo=Jogo||{}),Jogo.PageEvents.Main();